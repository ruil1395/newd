# üìÖ Telegram Bot –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ —É—Å–ª—É–≥–∏

–ë–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Å–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã, –±–∞—Ä–±–µ—Ä—à–æ–ø, –°–ü–ê –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å —É—Å–ª—É–≥.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üìÖ **–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å** | –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏, –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ 24/7 |
| üïê **–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–ª–æ—Ç–æ–≤** | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö/–∑–∞–Ω—è—Ç—ã—Ö –≤—Ä–µ–º—ë–Ω |
| üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É** | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å—è—Ö |
| ‚è∞ **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ —á–∞—Å –¥–æ –∑–∞–ø–∏—Å–∏ |
| üìã **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π** | –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –æ—Ç–º–µ–Ω–∞ —Å–≤–æ–∏—Ö –∑–∞–ø–∏—Å–µ–π |
| üíæ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | SQLite –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/workspaces/newd/booking_bot/
‚îú‚îÄ‚îÄ bot.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ database.py         # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—É—Å–ª—É–≥–∏, —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã)
‚îú‚îÄ‚îÄ __init__.py         # –ü–∞–∫–µ—Ç
‚îú‚îÄ‚îÄ .env.example        # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /workspaces/newd/booking_bot
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å |
|----------|----------|--------------|
| `TELEGRAM_BOT_TOKEN` | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ | @BotFather –≤ Telegram |
| `TELEGRAM_ADMIN_ID` | ID –∞–¥–º–∏–Ω–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | @userinfobot –≤ Telegram |

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ username –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ `.env`

### 4. –£–∑–Ω–∞–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ ID

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@userinfobot](https://t.me/userinfobot)
2. –ù–∞–∂–º–∏—Ç–µ Start
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≤–æ–π ID –≤ `.env`

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å–ª—É–≥

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.py`:

```python
SERVICES = {
    "consultation": {"name": "üìã –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è", "duration": 30, "price": 1000},
    "haircut": {"name": "‚úÇÔ∏è –°—Ç—Ä–∏–∂–∫–∞", "duration": 60, "price": 1500},
    "manicure": {"name": "üíÖ –ú–∞–Ω–∏–∫—é—Ä", "duration": 90, "price": 2000},
    "massage": {"name": "üíÜ –ú–∞—Å—Å–∞–∂", "duration": 60, "price": 2500},
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `name` | –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ (—Å —ç–º–æ–¥–∑–∏) |
| `duration` | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö |
| `price` | –¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö |

### –†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è

```python
# –ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã (–Ω–∞—á–∞–ª–æ, –∫–æ–Ω–µ—Ü)
WORK_HOURS = {"start": 9, "end": 20}

# –†–∞–±–æ—á–∏–µ –¥–Ω–∏ (0=–ü–Ω, 6=–í—Å)
WORK_DAYS = [0, 1, 2, 3, 4, 5]  # –ü–Ω-–°–±

# –î–Ω–µ–π –≤–ø–µ—Ä—ë–¥ –¥–ª—è –∑–∞–ø–∏—Å–∏
DAYS_AHEAD = 14

# –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–ª–æ—Ç–æ–≤ (–º–∏–Ω—É—Ç—ã)
SLOT_INTERVAL = 30
```

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ |
| `/mybookings` | –ú–æ–∏ –∑–∞–ø–∏—Å–∏ |

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç **"üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è"**
2. –í—ã–±–∏—Ä–∞–µ—Ç —É—Å–ª—É–≥—É –∏–∑ —Å–ø–∏—Å–∫–∞
3. –í—ã–±–∏—Ä–∞–µ—Ç –¥–∞—Ç—É (–∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ 7 –¥–Ω–µ–π)
4. –í—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è (‚úÖ)
5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç:**
```
üîî –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å!

üìã #42
üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω (@ivan)
üíÜ –£—Å–ª—É–≥–∞: –°—Ç—Ä–∏–∂–∫–∞
üìÖ –î–∞—Ç–∞: 28.02.2026
üïê –í—Ä–µ–º—è: 15:00
```

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 1 —á–∞—Å:**
```
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏!

üíÜ –£—Å–ª—É–≥–∞: –°—Ç—Ä–∏–∂–∫–∞
üìÖ –î–∞—Ç–∞: 28.02.2026
üïê –í—Ä–µ–º—è: 15:00

‚è≥ –î–æ –∑–∞–ø–∏—Å–∏ –æ—Å—Ç–∞–ª—Å—è 1 —á–∞—Å.
–ñ–¥—ë–º –≤–∞—Å! üôè
```

### –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç **"üìã –ú–æ–∏ –∑–∞–ø–∏—Å–∏"**
2. –í—ã–±–∏—Ä–∞–µ—Ç –∑–∞–ø–∏—Å—å
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ—Ç–º–µ–Ω—É

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `./booking.db`

**–¢–∞–±–ª–∏—Ü—ã:**

### `appointments`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | INTEGER | –ù–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏ |
| `user_id` | INTEGER | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `service_key` | TEXT | –ö–ª—é—á —É—Å–ª—É–≥–∏ |
| `service_name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ |
| `appointment_date` | DATE | –î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏ |
| `appointment_time` | TIME | –í—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ |
| `reminder_sent` | INTEGER | –§–ª–∞–≥ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è |
| `status` | TEXT | –°—Ç–∞—Ç—É—Å (active/cancelled) |

### `users`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `user_id` | INTEGER | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `username` | TEXT | Username |
| `first_name` | TEXT | –ò–º—è |
| `last_name` | TEXT | –§–∞–º–∏–ª–∏—è |

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

–°–æ–∑–¥–∞–π—Ç–µ `admin.py`:

```python
@dp.message(Command("admin"))
async def cmd_admin(message: types.Message):
    if message.from_user.id != ADMIN_ID:
        return
    
    appointments = db.get_all_active_appointments()
    # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏
```

### –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Calendar

–î–æ–±–∞–≤—å—Ç–µ –≤ `bot.py` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏:

```python
from google.oauth2.credentials import Credentials
from googleapiclient.discovery import build

def add_to_google_calendar(service_name, date, time):
    service = build('calendar', 'v3', credentials=creds)
    event = {
        'summary': service_name,
        'start': {'dateTime': f'{date}T{time}:00'},
        'end': {'dateTime': f'{date}T{end_time}:00'},
    }
    service.events().insert(calendarId='primary', body=event).execute()
```

### SMS-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

```python
import requests

def send_sms(phone, message):
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SMS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
    requests.post("https://sms-api.com/send", data={
        "phone": phone,
        "text": message
    })
```

## üõ† Troubleshooting

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω:
   ```bash
   cat .env | grep TOKEN
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

### –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É

1. –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π ID —á–µ—Ä–µ–∑ @userinfobot
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `ADMIN_ID` –≤ `.env`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –±–æ—Ç–∞

### –°–ª–æ—Ç—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

–û—á–∏—Å—Ç–∏—Ç–µ –±–∞–∑—É:
```bash
rm booking.db
python bot.py  # –°–æ–∑–¥–∞—Å—Ç—Å—è –Ω–æ–≤–∞—è
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [aiogram –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.aiogram.dev/)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [SQLite –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.sqlite.org/docs.html)
